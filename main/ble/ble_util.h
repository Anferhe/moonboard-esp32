/*
 * ble_util.h
 *
 *  Created on: Aug 16, 2023
 *      Author: yaroslav
 */

#ifndef MAIN_BLE_BLE_UTIL_H_
#define MAIN_BLE_BLE_UTIL_H_

#include "esp_bt_defs.h"
#include "esp_gatts_api.h"

#include <stdint.h>


#define EXT_ADV_HANDLE      0
#define NUM_EXT_ADV         1

// 1. Service handle
// 2. Characteristic handle
// 3. Characteristic value handle
#define GATT_HANDLE_COUNT   3
#define GATT_APP_ID 0

static const esp_ble_gap_ext_adv_t ext_adv = {EXT_ADV_HANDLE, 0, 0};

static const uint8_t uartServiceUuid[ESP_UUID_LEN_128] = {
	0x9e, 0xca, 0xdc, 0x24, 0x0e, 0xe5, 0xa9, 0xe0,
	0x93, 0xf3, 0xa3, 0xb5, 0x01, 0x00, 0x40, 0x6e
};

static const uint8_t uartRxCharUuid[ESP_UUID_LEN_128] = {
	0x9e, 0xca, 0xdc, 0x24, 0x0e, 0xe5, 0xa9, 0xe0,
	0x93, 0xf3, 0xa3, 0xb5, 0x02, 0x00, 0x40, 0x6e
};

//static const uint8_t uartTxCharUuid[ESP_UUID_LEN_128] = {
//	0x9e, 0xca, 0xdc, 0x24, 0x0e, 0xe5, 0xa9, 0xe0,
//	0x93, 0xf3, 0xa3, 0xb5, 0x03, 0x00, 0x40, 0x6e
//};


static const uint8_t raw_adv_data[] = {
	0x02, 0x01, 0x06,
	0x02, 0x0a, 0xeb,
	0x11, 0x07, 0x9e, 0xca, 0xdc, 0x24, 0x0e, 0xe5, 0xa9, 0xe0, 0x93, 0xf3, 0xa3, 0xb5, 0x01, 0x00, 0x40, 0x6e
};

static const uint8_t raw_scan_rsp_data[] = {
	0x0a, 0x09, 0x4d, 0x6f, 0x6f, 0x6e, 0x62, 0x6f, 0x61, 0x72, 0x64
};


struct gatts_profile_inst {
    esp_gatts_cb_t gatts_cb;
    uint16_t gatts_if;
    uint16_t service_handle;
    esp_gatt_srvc_id_t service_id;
    esp_bt_uuid_t char_uuid;
};

#endif /* MAIN_BLE_BLE_UTIL_H_ */
